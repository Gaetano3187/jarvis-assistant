generator client { provider = "prisma-client-js" }
datasource db      { provider = "postgresql" url = env("DATABASE_URL") }

model User {
  id        String   @id @default(cuid())
  email     String   @unique
  password  String
  expenses  Expense[]
  lists     ShoppingList[]
  incomes   Income[]
}

model Expense {
  id        String   @id @default(cuid())
  user      User     @relation(fields: [userId], references: [id])
  userId    String
  category  Category @default(VARIE)
  merchant  String?
  amount    Decimal  @db.Money
  date      DateTime
  createdAt DateTime @default(now())
}

model Income {
  id        String   @id @default(cuid())
  user      User     @relation(fields: [userId], references: [id])
  userId    String
  source    String
  amount    Decimal  @db.Money
  date      DateTime
}

model ShoppingList {
  id        String   @id @default(cuid())
  type      ListType
  user      User     @relation(fields: [userId], references: [id])
  userId    String
  items     Json     // [{name, qty, checked, expires}]
  updatedAt DateTime @updatedAt
}

enum Category   { CASA VESTITI DIVERTIMENTO VARIE }
enum ListType   { SUPERMARKET ONLINE }
